(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"06c5":function(t,e,n){"use strict";n("a630"),n("fb6a"),n("d3b7"),n("25f0"),n("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var i=r(n("6b75"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(t){if("string"===typeof t)return(0,i.default)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.default)(t,e):void 0}}},"09f0":function(t,e,n){"use strict";function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){r=!0,a=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(r)throw a}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},"0ccb":function(t,e,n){var i=n("50c4"),r=n("1148"),a=n("1d80"),o=Math.ceil,s=function(t){return function(e,n,s){var u,d,c=String(a(e)),l=c.length,f=void 0===s?" ":String(s),p=i(n);return p<=l||""==f?c:(u=p-l,d=r.call(f,o(u/f.length)),d.length>u&&(d=d.slice(0,u)),t?c+d:d+c)}};t.exports={start:s(!1),end:s(!0)}},"0d21":function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},"0dfe":function(t,e,n){var i=n("f8bf");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("3d86d05f",i,!0,{sourceMap:!1,shadowMode:!1})},1333:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.chat[data-v-458bd370]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:0 %?32?%}.chat[data-v-458bd370]:active{background-color:rgba(39,40,50,.2)}.chat .img[data-v-458bd370]{-webkit-box-flex:0;-webkit-flex:none;flex:none;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.chat .img uni-image[data-v-458bd370]{width:%?96?%;height:%?96?%;border-radius:%?20?%}.chat .tip[data-v-458bd370]{min-width:%?20?%;height:%?36?%;text-align:center;padding:0 %?6?%;font-size:%?24?%;color:#fff;border-radius:%?18?%;background:#ff5d5b;position:absolute;left:%?66?%;top:%?20?%}.chat .group-mark[data-v-458bd370]{position:absolute;width:%?16?%;height:%?16?%;background-color:#ffe431;border-radius:%?8?%;opacity:.8;bottom:%?25?%;right:%?-5?%}.chat .chat-info[data-v-458bd370]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?32?% 0;border-bottom:1px solid #f3f4f6;position:relative;width:%?590?%}.chat .chat-info .name[data-v-458bd370]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?480?%;color:#272832;height:%?50?%;overflow:hidden;text-overflow:ellipsis;padding-left:%?32?%}.chat .chat-info .message[data-v-458bd370]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?40?%;font-size:14px;color:rgba(39,40,50,.6);height:%?38?%;width:%?496?%;overflow:hidden;text-overflow:ellipsis;padding-left:%?32?%}.chat .chat-info .time[data-v-458bd370]{position:absolute;top:%?20?%;right:%?0?%;font-size:12px;color:rgba(39,40,50,.4)}',""]),t.exports=e},3835:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var i=s(n("0d21")),r=s(n("09f0")),a=s(n("06c5")),o=s(n("3d8c"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return(0,i.default)(t)||(0,r.default)(t,e)||(0,a.default)(t,e)||(0,o.default)()}},"3d8c":function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},"4d90":function(t,e,n){"use strict";var i=n("23e7"),r=n("0ccb").start,a=n("9a0c");i({target:"String",proto:!0,forced:a},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e91":function(t,e,n){"use strict";var i=n("4ea4");n("99af"),n("a15b"),n("a434"),n("d3b7"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("3835")),a=i(n("b85c")),o=i(n("9250")),s={data:function(){return{news:[],uid:"",imgurl:"",token:"",myname:"",friends:[],group:[],requestData:0,requestTime:""}},components:{indexFriends:o.default},onLoad:function(){var t=this;this.getStorages(),this.friendRequest(),this.getFriends(),this.join(this.uid),this.ScoketMsg(),this.ScoketGroupMsg(),uni.$on("refresh",(function(e){t.friends=[],t.getFriends()}))},methods:{getStorages:function(){try{var t=uni.getStorageSync("user");t?(this.uid=t.id,this.imgurl=this.serverUrl+t.imgurl,this.token=t.token,this.myname=t.name):uni.redirectTo({url:"../login/login"})}catch(e){}},join:function(t){this.socket.emit("login",t)},ScoketMsg:function(){var t=this;this.socket.on("msg",(function(e,n,i){var o="";0==e.type?o=e.message:1==e.type?o="[图片]":2==e.type?o="[音频]":3==e.type&&(o="[位置]");var s,u=(0,a.default)(t.friends.entries());try{for(u.s();!(s=u.n()).done;){var d=(0,r.default)(s.value,2),c=d[0],l=d[1];l.id==n&&(l.lastTime=new Date,l.message=o,0==i&&l.tip++,t.friends.splice(c,1),t.friends.unshift(l))}}catch(f){u.e(f)}finally{u.f()}}))},ScoketGroupMsg:function(){var t=this;this.socket.on("groupMsg",(function(e,n,i,o){var s="";0==e.type?s=e.message:1==e.type?s="[图片]":2==e.type?s="[音频]":3==e.type&&(s="[位置]");var u,d=(0,a.default)(t.friends.entries());try{for(d.s();!(u=d.n()).done;){var c=(0,r.default)(u.value,2),l=c[0],f=c[1];if(f.id==i){f.lastTime=new Date,n!=t.uid?f.message=o+":"+s:f.message=s,f.tip++,t.friends.splice(l,1),t.friends.unshift(f);break}}}catch(p){d.e(p)}finally{d.f()}}))},getFriends:function(){var t,e,n=this;t="/index/getmsg",e={uid:this.uid,token:this.token,state:0},this.request(t,e).then((function(i){var r,o=(0,a.default)(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.imgurl=n.serverUrl+s.imgurl,s.alias&&(s.name=s.alias)}}catch(u){o.e(u)}finally{o.f()}return n.friends=i,n.paixu(n.friends,"lastTime"),t="/index/getgroupmsg",e={uid:n.uid,token:n.token},n.request(t,e)})).then((function(t){var e,i=(0,a.default)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.imgurl=n.serverUrl+r.imgurl,n.socket.emit("group",r.id)}}catch(o){i.e(o)}finally{i.f()}n.group=t,n.friends=n.friends.concat(n.group),n.paixu(n.friends,"lastTime")}))},friendRequest:function(){var t=this,e="/index/getfriend",n={uid:this.uid,token:this.token,state:1};this.request(e,n).then((function(e){e.length>0&&(t.requestData=e.length,t.requestTime=e[0].lastTime)}))},paixu:function(t,e){for(var n=1;n<t.length;n++)for(var i=n;i>0;i--)if(t[i][e]>t[i-1][e]){var r=t[i];t[i]=t[i-1],t[i-1]=r}return t},search:function(){uni.navigateTo({url:"../search/search"})},toBulidGroup:function(){uni.navigateTo({url:"../buildGroup/buildGroup"})},toChatRoom:function(t){var e=this,n="";n=0==t.type?"/index/updatemsg":"/index/updategroupmsg";var i=t.id,r={uid:this.uid,fid:i,token:this.token};t.tip>0&&this.request(n,r).then((function(t){var n,r=(0,a.default)(e.friends);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.id==i&&e.$set(o,"tip",0)}}catch(s){r.e(s)}finally{r.f()}})),uni.navigateTo({url:"../chatRoom/chatRoom?id="+i+"&name="+t.name+"&type="+t.type+"&imgurl="+t.imgurl})}}};e.default=s},5178:function(t,e,n){t.exports=n.p+"static/img/search.38fb7872.png"},6658:function(t,e,n){"use strict";n("a9e3"),n("d3b7"),n("25f0"),n("4d90"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{friends:{type:Array},requestData:{type:Number},requestTime:{type:String}},watch:{friends:function(t){this.friends=t}},filters:{timeChange:function(t){var e=new Date(t),n=new Date,i=e.getHours().toString().padStart(2,0),r=e.getMinutes().toString().padStart(2,0),a=e.getFullYear(),o=e.getMonth()+1,s=e.getDate().toString().padStart(2,0),u=(n.getHours().toString().padStart(2,0),n.getMinutes().toString().padStart(2,0),n.getFullYear()),d=n.getMonth()+1,c=n.getDate().toString().padStart(2,0);return s===c&&o===d&&a===u?i+":"+r:s+1===c&&o===d&&a===u?"昨天"+i+":"+r:a+"/"+o+"/"+s}},methods:{toChatRoom:function(t){this.$emit("toChatRoom",t)},goRequest:function(){uni.navigateTo({url:"../firendRequest/firendRequest"})}}};e.default=i},"6b75":function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},7605:function(t,e,n){"use strict";n.r(e);var i=n("4e91"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"866c":function(t,e,n){t.exports=n.p+"static/img/apply.4aefb087.png"},9092:function(t,e,n){"use strict";var i=n("0dfe"),r=n.n(i);r.a},9250:function(t,e,n){"use strict";n.r(e);var i=n("cda5"),r=n("d964");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("a313");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"458bd370",null,!1,i["a"],o);e["default"]=u.exports},"92fb":function(t,e,n){"use strict";n.r(e);var i=n("e858"),r=n("7605");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("9092");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"39b5b5a8",null,!1,i["a"],o);e["default"]=u.exports},"9a0c":function(t,e,n){var i=n("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},a313:function(t,e,n){"use strict";var i=n("c791"),r=n.n(i);r.a},b85c:function(t,e,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var i=r(n("06c5"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=(0,i.default)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw o}}}}},c69e:function(t,e,n){t.exports=n.p+"static/img/add.b2a06e3d.png"},c791:function(t,e,n){var i=n("1333");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("f433a6b0",i,!0,{sourceMap:!1,shadowMode:!1})},cda5:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.requestData>0?i("v-uni-view",{staticClass:"chat",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goRequest.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"img"},[i("v-uni-image",{attrs:{src:n("866c")}}),i("span",{staticClass:"tip"},[t._v(t._s(t.requestData))])],1),i("v-uni-view",{staticClass:"chat-info"},[i("nobr",{staticClass:"name"},[t._v("好友申请")]),i("nobr",{staticClass:"message"},[t._v("茫茫人海，相遇便是缘分")]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(t._f("timeChange")(t.requestTime)))])],1)],1):t._e(),t._l(t.friends,(function(e,n){return i("v-uni-view",{key:n,staticClass:"chat",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toChatRoom(e)}}},[i("v-uni-view",{staticClass:"img"},[i("v-uni-image",{attrs:{src:e.imgurl}}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.tip>0,expression:"item.tip > 0"}],staticClass:"tip"},[t._v(t._s(e.tip))]),1==e.type?i("v-uni-view",{staticClass:"group-mark"}):t._e()],1),i("v-uni-view",{staticClass:"chat-info"},[i("nobr",{staticClass:"name"},[t._v(t._s(e.name))]),i("nobr",{staticClass:"message"},[t._v(t._s(e.message))]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(t._f("timeChange")(e.lastTime)))])],1)],1)}))],2)},a=[]},d964:function(t,e,n){"use strict";n.r(e);var i=n("6658"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},e858:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"status_bar"}),i("top-bar",{staticClass:"top-bar"},[i("v-uni-navigator",{staticClass:"mine",attrs:{slot:"left",url:"../userHome/userHome?id="+t.uid,"hover-class":"none"},slot:"left"},[i("v-uni-image",{attrs:{src:t.imgurl}})],1),i("v-uni-image",{staticClass:"search",attrs:{slot:"right",src:n("5178")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},slot:"right"}),i("v-uni-image",{staticClass:"add",attrs:{slot:"right",src:n("c69e")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBulidGroup.apply(void 0,arguments)}},slot:"right"})],1),i("v-uni-view",{staticClass:"main"},[i("index-friends",{attrs:{friends:t.friends,requestData:t.requestData,requestTime:t.requestTime},on:{toChatRoom:function(e){arguments[0]=e=t.$handleEvent(e),t.toChatRoom.apply(void 0,arguments)}}})],1)],1)},a=[]},f8bf:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.status_bar[data-v-39b5b5a8]{height:0;width:100%;background-color:hsla(0,0%,95.7%,.96)}.top-bar[data-v-39b5b5a8]{background-color:hsla(0,0%,95.7%,.96);box-shadow:0 1px rgba(39,40,50,.1)}.top-bar .mine[data-v-39b5b5a8]{width:%?68?%;height:%?68?%}.top-bar .mine uni-image[data-v-39b5b5a8]{width:%?68?%;height:%?68?%;border-radius:%?20?%}.top-bar .search[data-v-39b5b5a8],\r\n.top-bar .add[data-v-39b5b5a8]{width:%?52?%;height:%?52?%;margin-left:%?32?%}.main[data-v-39b5b5a8]{padding-top:%?88?%;width:100%}',""]),t.exports=e}}]);