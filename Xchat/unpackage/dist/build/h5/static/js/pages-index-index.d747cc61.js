(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0721":function(t,e,a){"use strict";var i=a("3d88"),n=a.n(i);n.a},"26e1":function(t,e,a){"use strict";a.r(e);var i=a("4a1b"),n=a("adc7");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("0721");var s,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"5cf21be6",null,!1,i["a"],s);e["default"]=u.exports},"3d88":function(t,e,a){var i=a("ce2b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("4141f09b",i,!0,{sourceMap:!1,shadowMode:!1})},"4a1b":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"top-bar"},[a("v-uni-view",{staticClass:"top-bar-left"},[t._t("left")],2),a("v-uni-view",{staticClass:"top-bar-center"},[t._t("center")],2),a("v-uni-view",{staticClass:"top-bar-right"},[t._t("right")],2)],1)},r=[]},"4e91":function(t,e,a){"use strict";var i=a("4ea4");a("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("26e1")),r=i(a("8e6d")),s={data:function(){return{news:[],uid:"",imgurl:"",token:"",myname:"",friends:[],requestData:0,requestTime:""}},components:{TopBar:n.default},onLoad:function(){this.getStorages(),this.getFriends(),this.friendRequest()},onPullDownRefresh:function(){uni.redirectTo({url:"../index/index"}),setTimeout((function(){uni.stopPullDownRefresh()}),500)},methods:{getStorages:function(){try{var t=uni.getStorageSync("user");t?(this.uid=t.id,this.imgurl=this.serverUrl+t.imgurl,this.token=t.token,this.myname=t.name):uni.redirectTo({url:"../login/login"})}catch(e){}},getFriends:function(){var t=this;uni.request({url:this.serverUrl+"/index/getfriend",data:{uid:this.uid,token:this.token,state:0},method:"POST",success:function(e){if(console.log(e),200==e.data.status){var a=e.data.result;for(var i in a)t.getMsg(a,i),t.getUnRead(a,i),a[i].imgurl=t.serverUrl+a[i].imgurl,a[i].alias&&(a[i].name=a[i].alias);t.friends=a}else 300==e.data.status?uni.redirectTo({url:"../login/login?name="+t.myname}):500==e.data.status&&uni.showToast({title:"服务器出错了",icon:"none",duration:2e3})}})},getMsg:function(t,e){var a=this;uni.request({url:this.serverUrl+"/index/getlastmsg",data:{uid:this.uid,fid:t[e].id,token:this.token},method:"POST",success:function(i){if(200==i.data.status){var n=i.data.result;0==n.types?n.message=n.message:1==n.types?n.message="[图片]":2==n.types?n.message="[音频]":3==n.types&&(n.message="[位置]"),t[e].message=n.message}else 300==i.data.status?uni.redirectTo({url:"../login/login?name="+a.myname}):500==i.data.status&&uni.showToast({title:"服务器出错了",icon:"none",duration:2e3})}})},getUnRead:function(t,e){var a=this;uni.request({url:this.serverUrl+"/index/unreadmsg",data:{uid:this.uid,fid:t[e].id,token:this.token},method:"POST",success:function(i){if(200==i.data.status){var n=i.data.result,r=t[e];r.tip=n,t.splice(e,1,r)}else 300==i.data.status?uni.redirectTo({url:"../login/login?name="+a.myname}):500==i.data.status&&uni.showToast({title:"服务器出错了",icon:"none",duration:2e3})}})},friendRequest:function(){var t=this;uni.request({url:this.serverUrl+"/index/getfriend",data:{uid:this.uid,token:this.token,state:1},method:"POST",success:function(e){if(200==e.data.status){var a=e.data.result;a.length>0&&(t.requestData=a.length,t.requestTime=a[0].lastTime)}else 300==e.data.status?uni.redirectTo({url:"../login/login?name="+t.myname}):500==e.data.status&&uni.showToast({title:"服务器出错了",icon:"none",duration:2e3})}})},paixu:function(t,e,a){if(0==a){for(var i=1;i<t.length;i++)for(var n=i;n>0;n--)if(t[n][e]>t[n-1][e]){var r=t[n];t[n]=t[n-1],t[n-1]=r}return t}},goRequest:function(){uni.navigateTo({url:"../firendRequest/firendRequest"})},search:function(){uni.navigateTo({url:"../search/search"})},changeDate:function(t){return r.default.changeDate(t)},toChatRoom:function(t){uni.navigateTo({url:"../chatRoom/chatRoom?id="+t.id+"&name="+t.name+"&type="+t.type})},test:function(){uni.navigateTo({url:"../chatRoom/chatRoom"})}}};e.default=s},5178:function(t,e,a){t.exports=a.p+"static/img/search.38fb7872.png"},5246:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{}}};e.default=i},5675:function(t,e,a){var i=a("e7f3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("17f20510",i,!0,{sourceMap:!1,shadowMode:!1})},7605:function(t,e,a){"use strict";a.r(e);var i=a("4e91"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"866c":function(t,e,a){t.exports=a.p+"static/img/apply.4aefb087.png"},"8e6d":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={changeDate:function(t){var e=new Date(t),a=new Date,i=e.getHours(),n=e.getMinutes(),r=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),u=(a.getHours(),a.getMinutes(),a.getFullYear()),l=a.getMonth()+1,c=a.getDate();return o===c&&s===l&&r===u?(i<10&&(i="0"+i),n<10&&(n="0"+n),i+":"+n):o+1===c&&s===l&&r===u?(i<10&&(i="0"+i),n<10&&(n="0"+n),"昨天"+i+":"+n):(i<10&&(i="0"+i),n<10&&(n="0"+n),r+"/"+s+"/"+o)},changeTime:function(t){var e=new Date(t),a=(e.getHours(),e.getMinutes(),e.getFullYear()),i=e.getMonth()+1,n=e.getDate();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n},chatDate:function(t){var e=new Date(t),a=new Date,i=e.getHours(),n=e.getMinutes(),r=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),u=(a.getHours(),a.getMinutes(),a.getFullYear()),l=a.getMonth()+1,c=a.getDate();return o===c&&s===l&&r===u?(i<10&&(i="0"+i),n<10&&(n="0"+n),i+":"+n):o+1===c&&s===l&&r===u?(i<10&&(i="0"+i),n<10&&(n="0"+n),"昨天"+i+":"+n):r===u?(i<10&&(i="0"+i),n<10&&(n="0"+n),s+"月"+o+"日 "+i+":"+n):(i<10&&(i="0"+i),n<10&&(n="0"+n),r+"年"+s+"月"+o+"日 "+i+":"+n)},fileName:function(t){var e=new Date(t),a=(e.getHours(),e.getMinutes(),e.getFullYear()),i=e.getMonth()+1,n=e.getDate();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+i+n}};e.default=i},"92fb":function(t,e,a){"use strict";a.r(e);var i=a("e571"),n=a("7605");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("df22");var s,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"6a0d3e70",null,!1,i["a"],s);e["default"]=u.exports},adc7:function(t,e,a){"use strict";a.r(e);var i=a("5246"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},c69e:function(t,e,a){t.exports=a.p+"static/img/add.b2a06e3d.png"},ce2b:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.top-bar[data-v-5cf21be6]{z-index:99;height:%?88?%;position:fixed;left:0;right:0;display:-webkit-box;display:-webkit-flex;display:flex;text-align:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.top-bar-center[data-v-5cf21be6]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.top-bar-left[data-v-5cf21be6]{-webkit-box-flex:0;-webkit-flex:none;flex:none;padding-left:%?32?%}.top-bar-right[data-v-5cf21be6]{-webkit-box-flex:0;-webkit-flex:none;flex:none;padding-right:%?32?%}',""]),t.exports=e},df22:function(t,e,a){"use strict";var i=a("5675"),n=a.n(i);n.a},e571:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"status_bar"}),i("TopBar",{staticClass:"top-bar"},[i("v-uni-navigator",{staticClass:"mine",attrs:{slot:"left",url:"../userHome/userHome?id="+t.uid,"hover-class":"none"},slot:"left"},[i("v-uni-image",{attrs:{src:t.imgurl}})],1),i("v-uni-image",{staticClass:"search",attrs:{slot:"right",src:a("5178")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},slot:"right"}),i("v-uni-image",{staticClass:"add",attrs:{slot:"right",src:a("c69e")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.test.apply(void 0,arguments)}},slot:"right"})],1),i("v-uni-view",{staticClass:"main"},[t.requestData>0?i("v-uni-view",{staticClass:"chat",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goRequest.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"img"},[i("v-uni-image",{attrs:{src:a("866c")}}),i("span",{staticClass:"tip"},[t._v(t._s(t.requestData))])],1),i("v-uni-view",{staticClass:"chat-info"},[i("nobr",{staticClass:"name"},[t._v("好友申请")]),i("nobr",{staticClass:"message"},[t._v("茫茫人海，相遇便是缘分")]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.changeDate(t.requestTime)))])],1)],1):t._e(),t._l(t.friends,(function(e,a){return i("v-uni-view",{key:a,staticClass:"chat",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toChatRoom(e)}}},[i("v-uni-view",{staticClass:"img"},[i("v-uni-image",{attrs:{src:e.imgurl}}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.tip>0,expression:"item.tip > 0"}],staticClass:"tip"},[t._v(t._s(e.tip))])],1),i("v-uni-view",{staticClass:"chat-info"},[i("nobr",{staticClass:"name"},[t._v(t._s(e.name))]),i("nobr",{staticClass:"message"},[t._v(t._s(e.message))]),i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.changeDate(e.lastTime)))])],1)],1)}))],2)],1)},r=[]},e7f3:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.status_bar[data-v-6a0d3e70]{height:0;width:100%;background-color:hsla(0,0%,95.7%,.96)}.top-bar[data-v-6a0d3e70]{background-color:hsla(0,0%,95.7%,.96);border-bottom:1px solid rgba(39,40,50,.1)}.top-bar .mine[data-v-6a0d3e70]{width:%?68?%;height:%?68?%}.top-bar .mine uni-image[data-v-6a0d3e70]{width:%?68?%;height:%?68?%;border-radius:%?20?%}.top-bar .search[data-v-6a0d3e70],\r\n.top-bar .add[data-v-6a0d3e70]{width:%?52?%;height:%?52?%;margin-left:%?32?%}.main[data-v-6a0d3e70]{padding-top:%?88?%;width:100%}.main .chat[data-v-6a0d3e70]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:0 %?32?%}.main .chat[data-v-6a0d3e70]:active{background-color:rgba(39,40,50,.2)}.main .chat .img[data-v-6a0d3e70]{-webkit-box-flex:0;-webkit-flex:none;flex:none;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.main .chat .img uni-image[data-v-6a0d3e70]{width:%?96?%;height:%?96?%;border-radius:%?20?%}.main .chat .tip[data-v-6a0d3e70]{min-width:%?20?%;height:%?36?%;text-align:center;padding:0 %?6?%;font-size:%?24?%;color:#fff;border-radius:%?18?%;background:#ff5d5b;position:absolute;left:%?66?%;top:%?20?%}.main .chat .chat-info[data-v-6a0d3e70]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?32?% 0;border-bottom:1px solid #f3f4f6;position:relative;width:%?590?%}.main .chat .chat-info .name[data-v-6a0d3e70]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?480?%;color:#272832;height:%?50?%;overflow:hidden;text-overflow:ellipsis;padding-left:%?32?%}.main .chat .chat-info .message[data-v-6a0d3e70]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?40?%;font-size:14px;color:rgba(39,40,50,.6);height:%?38?%;width:%?496?%;overflow:hidden;text-overflow:ellipsis;padding-left:%?32?%}.main .chat .chat-info .time[data-v-6a0d3e70]{position:absolute;top:%?20?%;right:%?0?%;font-size:12px;color:rgba(39,40,50,.4)}',""]),t.exports=e}}]);